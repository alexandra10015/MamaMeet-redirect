<script>
(function () {
  // Helper: check for ?noredirect=1 in the URL
  var params = new URLSearchParams(window.location.search);
  var noRedirect = params.get('noredirect') === '1';

  function detectTargetUrl() {
    var ua = navigator.userAgent || navigator.vendor || window.opera;
    var isAndroid = /android/i.test(ua);
    var isiOS =
      /iPad|iPhone|iPod/.test(ua) ||
      (navigator.platform === "MacIntel" && navigator.maxTouchPoints > 1); // iPadOS

    if (isAndroid) {
      return "https://play.google.com/store/apps/details?id=app.mamameet.net";
    } else if (isiOS) {
      return "https://apps.apple.com/app/id6747424447";
    }
    return "https://mamameet.app"; // desktop/unknown
  }

  function go() {
    if (noRedirect) return; // stay on page for testing
    var target = detectTargetUrl();

    // Give GA a moment to load & send the hit before leaving
    setTimeout(function () {
      window.location.replace(target);
    }, 1200);
  }

  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", go);
  } else {
    go();
  }
})();
</script>

